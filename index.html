<!DOCTYPE html><html><head><title>Redis4Cats: Home</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="ProfunKtor" /><meta name="description" content="Redis client for Cats Effect &amp; Fs2" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="Redis4Cats: Home" /><meta name="title" property="og:title" content="Redis4Cats: Home" /><meta name="og:site_name" content="Redis4Cats" /><meta name="og:url" content="https://redis4cats.profunktor.dev/" /><meta name="og:type" content="website" /><meta name="og:description" content="Redis client for Cats Effect &amp; Fs2" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="Redis4Cats: Home" /><meta name="twitter:image" content="/img/poster.png" /><meta name="twitter:description" content="Redis client for Cats Effect &amp; Fs2" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/vs.css" /><link rel="stylesheet" href="/css/light-style.css" /></head><body class="home"><nav id="navigation" aria-labelledby="main-navigation"><div class="navbar-wrapper container"><div class="navigation-brand"><a href="/" class="brand custom-feature-icon"><div class="icon-wrapper"></div><span class="brand-title">Redis4Cats</span></a></div><div class="navigation-menu"><ul><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li><a href="https://github.com/profunktor/redis4cats" target="_blank" rel="noopener noreferrer"><i class="nav-item-icon fa fa-lg fa-github" hidden="true"></i><span class="nav-item-text">GitHub</span></a></li><li><a href="/api"><i class="nav-item-icon fa fa-lg fa-file-text" hidden="true"></i><span class="nav-item-text">Documentation</span></a></li></ul></div></div></nav><header id="masthead"><div class="container text-center"><h1 class="masthead-description">Redis client for Cats Effect &amp; Fs2</h1><a href="https://github.com/profunktor/redis4cats" target="_blank" rel="noopener noreferrer" class="masthead-button">View on GitHub</a></div></header><nav class="menu-container" aria-labelledby="section-navigation"><div id="horizontal-menu"><ul class="horizontal-nav"><li><a class=" active " href="/">Home</a></li><li><a class="" href="/quickstart.html">Quick Start</a></li><li><a class="" href="/client.html">Client</a></li><li><a class="" href="/codecs.html">Codecs</a></li><li><a class="" href="/effects/">Effects API</a></li><li><a class="" href="/streams/">Streams API</a></li><li><a class="" href="/transactions.html">Transactions</a></li><li><a class="" href="/pipelining.html">Pipelining</a></li></ul></div></nav><main id="site-main"><section class="main-content"><div class="container"><div id="content"><h1 id="redis4cats">redis4cats</h1>

<p><a href="https://github.com/profunktor/redis4cats/actions"><img src="https://github.com/profunktor/redis4cats/workflows/Build/badge.svg" alt="CI Status" /></a>
<a href="https://gitter.im/profunktor-dev/redis4cats"><img src="https://badges.gitter.im/profunktor-dev/redis4cats.svg" alt="Gitter Chat" /></a>
<a href="http://search.maven.org/#search%7Cga%7C1%7Credis4cats-effects"><img src="https://img.shields.io/maven-central/v/dev.profunktor/redis4cats-effects_2.12.svg" alt="Maven Central" /></a> <a href="https://typelevel.org/cats/"><img src="https://raw.githubusercontent.com/typelevel/cats/c23130d2c2e4a320ba4cde9a7c7895c6f217d305/docs/src/main/resources/microsite/img/cats-badge.svg" height="40px" align="right" alt="Cats friendly" /></a>
<a href="https://mergify.io"><img src="https://img.shields.io/endpoint.svg?url=https://gh.mergify.io/badges/profunktor/redis4cats&amp;style=flat" alt="MergifyStatus" /></a>
<a href="https://scala-steward.org"><img src="https://img.shields.io/badge/Scala_Steward-helping-brightgreen.svg?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAMAAAARSr4IAAAAVFBMVEUAAACHjojlOy5NWlrKzcYRKjGFjIbp293YycuLa3pYY2LSqql4f3pCUFTgSjNodYRmcXUsPD/NTTbjRS+2jomhgnzNc223cGvZS0HaSD0XLjbaSjElhIr+AAAAAXRSTlMAQObYZgAAAHlJREFUCNdNyosOwyAIhWHAQS1Vt7a77/3fcxxdmv0xwmckutAR1nkm4ggbyEcg/wWmlGLDAA3oL50xi6fk5ffZ3E2E3QfZDCcCN2YtbEWZt+Drc6u6rlqv7Uk0LdKqqr5rk2UCRXOk0vmQKGfc94nOJyQjouF9H/wCc9gECEYfONoAAAAASUVORK5CYII=" alt="Scala Steward badge" /></a></p>

<p>Redis client built on top of <a href="https://typelevel.org/cats-effect/">Cats Effect</a>, <a href="http://fs2.io/">Fs2</a> and the async Java client <a href="https://lettuce.io/">Lettuce</a>.</p>

<h3 id="quick-start">Quick Start</h3>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.effect.</span><span class="o">*</span>
<span class="k">import</span> <span class="nn">cats.implicits.</span><span class="o">*</span>
<span class="k">import</span> <span class="nn">dev.profunktor.redis4cats.Redis</span>
<span class="k">import</span> <span class="nn">dev.profunktor.redis4cats.effect.Log.Stdout.given</span>

<span class="k">object</span> <span class="nc">QuickStart</span> <span class="k">extends</span> <span class="nv">IOApp</span><span class="o">.</span><span class="py">Simple</span><span class="k">:</span>

  <span class="kt">val</span> <span class="kt">run:</span> <span class="kt">IO</span><span class="o">[</span><span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span>
    <span class="nc">Redis</span><span class="o">[</span><span class="kt">IO</span><span class="o">].</span><span class="py">utf8</span><span class="o">(</span><span class="s">"redis://localhost"</span><span class="o">).</span><span class="py">use</span> <span class="o">{</span> <span class="n">redis</span> <span class="k">=&gt;</span>
      <span class="k">for</span>
        <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">redis</span><span class="o">.</span><span class="py">set</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"123"</span><span class="o">)</span>
        <span class="n">x</span> <span class="k">&lt;-</span> <span class="nv">redis</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="s">"foo"</span><span class="o">)</span>
        <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">redis</span><span class="o">.</span><span class="py">setNx</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"should not happen"</span><span class="o">)</span>
        <span class="n">y</span> <span class="k">&lt;-</span> <span class="nv">redis</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="s">"foo"</span><span class="o">)</span>
        <span class="k">_</span> <span class="k">&lt;-</span> <span class="nc">IO</span><span class="o">(</span><span class="nf">println</span><span class="o">(</span><span class="n">x</span> <span class="o">===</span> <span class="n">y</span><span class="o">))</span> <span class="c1">// true</span>
      <span class="nf">yield</span> <span class="o">()</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>The API is quite stable and <em>heavily used in production</em>. However, binary compatibility is not guaranteed across versions for now.</p>

<p>If you like it, give it a ‚≠ê ! If you think we could do better, please <a href="https://gitter.im/profunktor-dev/redis4cats">let us know</a>!</p>

<h3 id="versions">Versions</h3>

<p>The <code class="language-plaintext highlighter-rouge">1.x.x</code> series is built on Cats Effect 3 whereas the <code class="language-plaintext highlighter-rouge">0.x.x</code> series is built on Cats Effect 2.</p>

<h3 id="dependencies">Dependencies</h3>

<p>Add this to your <code class="language-plaintext highlighter-rouge">build.sbt</code> for the <a href="https://redis4cats.profunktor.dev/effects/">Effects API</a> (depends on <code class="language-plaintext highlighter-rouge">cats-effect</code>):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libraryDependencies += "dev.profunktor" %% "redis4cats-effects" % Version
</code></pre></div></div>

<p>Add this for the <a href="https://redis4cats.profunktor.dev/streams/">Streams API</a> (depends on <code class="language-plaintext highlighter-rouge">fs2</code> and <code class="language-plaintext highlighter-rouge">cats-effect</code>):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libraryDependencies += "dev.profunktor" %% "redis4cats-streams" % Version
</code></pre></div></div>

<h3 id="log4cats-support">Log4cats support</h3>

<p><code class="language-plaintext highlighter-rouge">redis4cats</code> needs a logger for internal use and provides instances for <code class="language-plaintext highlighter-rouge">log4cats</code>. It is the recommended logging library:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libraryDependencies += "dev.profunktor" %% "redis4cats-log4cats" % Version
</code></pre></div></div>

<h2 id="running-the-tests-locally">Running the tests locally</h2>

<p>Start both a single Redis node and a cluster using <code class="language-plaintext highlighter-rouge">docker-compose</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> docker-compose up
<span class="o">&gt;</span> sbt +test
</code></pre></div></div>

<p>If you are trying to run cluster mode tests on macOS you might receive host not found errors. As a workaround add
new environment variable in <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> for <code class="language-plaintext highlighter-rouge">RedisCluster</code>: <code class="language-plaintext highlighter-rouge">IP=0.0.0.0</code></p>

<p>The environment section should look like this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    environment:
      - INITIAL_PORT=30001
      - DEBUG=false
      - IP=0.0.0.0
</code></pre></div></div>

<h2 id="code-of-conduct">Code of Conduct</h2>

<p>See the <a href="https://redis4cats.profunktor.dev/CODE_OF_CONDUCT">Code of Conduct</a></p>

<h2 id="license">LICENSE</h2>

<p>Licensed under the Apache License, Version 2.0 (the ‚ÄúLicense‚Äù); you may not use this project except in compliance with
the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.</p>

<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an
‚ÄúAS IS‚Äù BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific
language governing permissions and limitations under the License.</p>

</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><p>Redis4Cats is designed and developed by <a href="https://redis4cats.profunktor.dev/" target="_blank" rel="noopener noreferrer">ProfunKtor</a></p></div><div class="row"><div><p>Website built with <a href="https://47degrees.github.io/sbt-microsites/" target="_blank" rel="noopener noreferrer">sbt-microsites</a> - ¬© 2019 <a href="https://www.47deg.com/" target="_blank" rel="noopener noreferrer">47 Degrees</a></p></div></div></div></footer><script src="/highlight/highlight.pack.js"></script><script src="/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'profunktor-dev/redis4cats'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/js/version-selector.js"></script><script src="/js/search.js"></script></body></html>